{"version":3,"file":"static/webpack/static/development/pages/index.js.f9d1e4ce25eedb03fa94.hot-update.js","sources":["webpack:///./src/utils/redux/dynamicReducerWrap.tsx"],"sourcesContent":["import React, { ComponentType, Component } from 'react';\nimport { ReducersMapObject } from 'redux';\nimport { ReactReduxContext } from 'react-redux';\nimport { StoreProps } from './withRedux';\nimport { ReducerEnhancedStore } from './configureStore';\n\ninterface ReducerProps {\n  reducers: ReducersMapObject;\n}\n\ninterface DynamicReducerWrapProps extends ReducerProps {\n  Child: ComponentType<any>;\n}\n\n// interface SubstitueReducersState {\n//   showChild: boolean;\n// }\n\nclass SubstitueReducers extends Component<\n  DynamicReducerWrapProps & StoreProps<ReducerEnhancedStore>,\n  // SubstitueReducersState\n> {\n  public constructor(props: DynamicReducerWrapProps & StoreProps<ReducerEnhancedStore>) {\n    super(props);\n    const { store, reducers } = props;\n    store.substitueReducers(reducers);\n    // this.state = {\n    //   showChild: true,\n    // };\n    console.log('injecting reducer: ', reducers);\n  }\n\n  public static getDerivedStateFromError() {\n    // Update state so the next render will show the fallback UI.\n    return { showChld: false };\n  }\n\n  public componentWillUnmount() {\n    // console.log(1);\n    // this.setState({ showChild: false });\n    const { store, reducers } = this.props;\n    console.log('remove reducers: ', reducers);\n    store.removeUnusedReducers();\n  }\n\n  public render() {\n    const { Child } = this.props;\n    // const { showChild } = this.state;\n    return <Child />;\n  }\n}\n\nfunction dynamicReducerWrap<S extends ReducerEnhancedStore = ReducerEnhancedStore>({\n  reducers,\n  Child,\n}: DynamicReducerWrapProps) {\n  return () => {\n    return (\n      <ReactReduxContext.Consumer>\n        {({ store }) => (\n          <>\n            <SubstitueReducers\n              store={store as S}\n              reducers={reducers}\n              Child={Child}\n            />\n          </>\n        )}\n      </ReactReduxContext.Consumer>\n    );\n  };\n}\n\nexport default dynamicReducerWrap;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AAWA;AACA;AACA;AAEA;;;;;AAIA;AAAA;AACA;AADA;AACA;AAAA;AADA;AAAA;AAGA;AAEA;AACA;AACA;AAAA;AAPA;AAQA;AACA;;;AAMA;AACA;AACA;AAFA;AAAA;AAAA;AAIA;AACA;AACA;;;AAEA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAjBA;AACA;AACA;AAAA;AAAA;AACA;;;;AAjBA;AACA;AAiCA;AAGA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAGA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAWA;AACA;AACA;AACA;;;;A","sourceRoot":""}